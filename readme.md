# Coool Configuration Manager

This application handles the detector configuration file history.

Application is built using standard **Nette framework** sandbox. For more information, please refer to the Nette's [documentation](https://doc.nette.org/).

## Installation and configuration

### Requirements 

To run this project, you will need following:

- Git
- PHP 5.3.x+ with MySQL 5.5+
- PHP Composer
- node.js with NPM installed
- Grunt and Bower installed (use `npm install -g bower grunt-cli`)

### Configuring

First you have to copy the `app/config/config.local.sample.neon` to `app/config/config.local.neon`. This configuration file uses NEON syntax (similar to YAML) and it configures following:

- database connection
- `UPLOAD_FOLDER` constant, which specifies, where should be the new configuration files uploaded

Second, make sure `log/`, `temp/` and `upload/` folders are writable.

### Downloading libraries

You will need to install required composer packages. In project root, simply run `composer install`, or `php path/to/composer.phar install` and wait until the command finishes.

### Generating assets

In `www/` directory, run `npm instal` to download necessary npm and bower packages. Next, run `grunt release` to generate minified **master.css** and **master.js** files.

### Database

Project is expected to use `runlb` database. If not present, import two tables `tb_cooolcfghistory` and `tb_cooolcfghistory_log` to the `runlb` database using `database.sql` dump.

## Development

### Back-end

As mentioned above, application is built using Nette framework. For more information, please refer to the official [documentation](https://doc.nette.org/).

### Font-end

Use Grunt task runner to watch sources and generate assets on the fly. Simply run `grunt` in the `www/` folder. All asset sources are in `www/src` folder.

Application uses SASS preprocessor for CSS and Browserify for JavaScript. SASS source files are located in `www/src/scss` folder. Root file for SASS compiler is `main.scss`, so make sure all other SASS files are included in there (directly or indirectly). 

Root file for Browserify is `www/src/js/main.js`. Application also uses precompiled Handlebars templating engine - sources are located in `www/src/templates`. Basic app overview:
 
 - `www/src/js/bindings` contains all basic jQuery binding crap and some interaction logic for the views
 - `www/src/js/views` contains view classes to be used for rendering templates
 - `www/src/js/main.js` is a Browserify dependency root. Typically contains invocation of all bindings (controllers)
 - `www/src/js/templates.js` - if not present, then it will be generated by Grunt. Contains compiled Handlebars templates. After importing this file to your script via CommonJS syntax `var templates = require('path/to/templates.js')`, you can render **mytemplate.hbs** template by calling `templates.mytemplate(data)`, where `data` is an object to be passed to the template. 